<div class="container">
  <div class="row" class="col-md- col-md-offset-3">
    <form class="form" #notasform="ngForm" novalidate>

      <h2 class="titulo">Alta de Usuarios</h2>

      <div class="form-group">
        <input type="text"  [(ngModel)]="user.apellido" placeholder="Ingrese Apellido"
        name="userLastname" #userLastname="ngModel"  class="form-control" required>
        <span *ngIf="userLastname.invalid && (userLastname.dirty || userLastname.touched)">
          <div [hidden]="!userLastName.errors.required" class="alert-danger">
            campo obligatorio
          </div>
        </span>
      </div>
      <div class="form-group">
        <input type="text" name="userName" [(ngModel)]="user.nombre" placeholder="Ingrese Nombre" #userName="ngModel"
        class="form-control" required>
        <span *ngIf="!userName.valid && userName.touched">
          <div [hidden]="!userName.errors.required" class="alert-danger">
            campo obligatorio
          </div>
        </span>
      </div>
      <div class="form-group">
        <input type="password" name="userPass" [(ngModel)]="user.password" placeholder="Ingrese ContraseÃ±a" #userPass="ngModel"
        class="form-control" required>
        <span *ngIf="!userPass.valid && userPass.touched">
          <div [hidden]="!userPass.errors.required" class="alert-danger">
            campo obligatorio
          </div>
        </span>
      </div>
      <div class="form-group">
        <input type="number" name="userDni" [(ngModel)]="user.dni" placeholder="Ingrese DNI" #userDni="ngModel"
        class="form-control" required>
        <span *ngIf="!userDni.valid && userDni.touched">
          <div [hidden]="!userDni.errors.required" class="alert-danger">
            campo obligatorio
          </div>
        </span>
      </div>
      <div class="form-group">
        <input type="email" name="userEmail" [(ngModel)]="user.email" placeholder="Ingrese Email" #userEmail="ngModel"
        class="form-control" required>
        <span *ngIf="!userEmail.valid && userEmail.touched">
          <div [hidden]="!userEmail.errors.required" class="alert-danger">
            campo obligatorio
          </div>
        </span>
      </div>
      <div class="form-group">
        <input type="number" name="userPhone" [(ngModel)]="user.telefono" placeholder="Ingrese Telefono" #userPhone="ngModel"
        class="form-control" required>
        <span *ngIf="!userPhone.valid && userPhone.touched">
          <div [hidden]="!userPhone.errors.required" class="alert-danger">
            campo obligatorio
          </div>
        </span>
      </div>
      <div class="form-group">
        <input type="text" name="userUser" [(ngModel)]="user.usuario" placeholder="Ingrese Usuario" #userUser="ngModel"
        class="form-control" required>
        <span *ngIf="!userUser.valid && userUser.touched">
          <div [hidden]="!userUser.errors.required" class="alert-danger">
            campo obligatorio
          </div>
        </span>
      </div>
      <div class="form-group">
        <input type="text" name="userPerfil" [(ngModel)]="user.perfil" placeholder="Ingrese Perfil" #userPerfil="ngModel"
        class="form-control" required>
        <span *ngIf="!userPerfil.valid && userPerfil.touched">
          <div [hidden]="!userPerfil.errors.required" class="alert-danger">
            campo obligatorio
          </div>
        </span>
      </div>
      <!-- <div class="form-group">
        <select (change)="aplicardescuento($event)" class="form-control">
          <option value="X">Seleccione un Rol</option>
          <option value="1">Administrador</option>
          <option value="2">Administrativo</option>
          <option value="3">Cliente</option>
        </select>
      </div> -->

      <div class="alert-dark" *ngIf="!notasform.valid && notasform.touched">
        Completar datos obligatorios
      </div>

      <button type="button" class="btn btn-primary" (click)="saveUser()" [disabled]="!notasform.valid">Guardar</button>

    </form>
  </div>

  <!-- Datatable, hay que revisar los by!-->
  <table class="table table-striped" [mfData]="users" #mf="mfDataTable" [mfRowsOnPage]="4">
    <thead>
      <tr>
        <th style="width: 10%">
          <mfDefaultSorter by="userLastname">Apellido</mfDefaultSorter>
        </th>
        <th style="width: 10%">
          <mfDefaultSorter by="userName">Nombre</mfDefaultSorter>
        </th>
        <th style="width: 10%">
          <mfDefaultSorter by="userDni">DNI</mfDefaultSorter>
        </th>
        <th style="width: 10%">
          <mfDefaultSorter by="userEmail">E-mail</mfDefaultSorter>
        </th>
        <th style="width: 10%">
          <mfDefaultSorter by="userPhone">Telefono</mfDefaultSorter>
        </th>
        <th style="width: 10%">
          <mfDefaultSorter by="userUser">Usuario</mfDefaultSorter>
        </th>
        <th style="width: 10%">
          <mfDefaultSorter by="userPerfil">Perfil</mfDefaultSorter>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of mf.data">
        <td>{{item.apellido}}</td>
        <td>{{item.nombre}}</td>
        <td>{{item.dni}}</td>
        <td>{{item.email}}</td>
        <td>{{item.telefono}}</td>
        <td>{{item.usuario}}</td>
        <td>{{item.perfil}}</td>
        <td>
          <button class="btn-danger" (click)="eliminarUser(item)">Borrar</button>
          <button class="btn-dark" (click)="elegirUser(item)">Modificar</button>
        </td>
      </tr>




    </tbody>
    <tfoot>
      <tr>
        <td colspan="4">
          <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25]"></mfBootstrapPaginator>
        </td>
      </tr>
    </tfoot>
  </table>
</div>
